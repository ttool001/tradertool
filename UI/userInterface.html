<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial=scale=1" name="viewport">
    <title>Sentiment Analysis</title><!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="my_style.css" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Berkshire+Swash' rel=
    'stylesheet' type='text/css'>
    <script src=
    "http://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js">
    </script>
    <script src="http://code.highcharts.com/highcharts.js">
    </script>
    <script>
        $(document).ready(function(){
             $(".clickable-row").click(function() {
                window.document.location = $(this).data("href");
            });
            topFiveExtremeTickers('http://python-jphackathon.rhcloud.com/getlists/', 'pos_list', '#table_positive');
            topFiveExtremeTickers('http://python-jphackathon.rhcloud.com/getlists/', 'neg_list', '#table_negative');
        });
    </script>
</head>
<body>
    <script type="text/javascript">
                var list = new Array();
                var table_start='<table class="table table-bordered table-hover specialCollapse">';
                var table_header='<thead class="thead-inverse"><tr><th class="col-md-6"><small>Ticker<\/small><\/th><th class="col-md-6"><small>Sentiment<\/small><\/th><\/tr><\/thead>';
                var table_body_start='<tbody>';
                var table_row_start='<tr class="clickable-row">';
                var cell_start='<td class="col-md-6"><small>';
                var cell_end='<\/small><\/td>';
                var table_row_end='<\/tr>';
                var table_body_end='<\/tbody>';
                var table_end='<\/table>';

                function topFiveExtremeTickers(endpoint, list_type, divID) {
                    // alert("endpoint is:" + endpoint);
                    
                    $.get(endpoint, function(result) {
                        console.log(result);
                        $.each(result[list_type], function(index, value) {
                            console.log(this['ticker'] + ":" + this['senti']);
                            list.push(this['ticker']);
                            list.push(this['senti']);
                        });
                        alert("inside function; " + list);
                        console.log(list);

                        var table_creation_start=table_start+table_header+table_body_start;
                        for(var i=0; i<10; i=i+2){
                            table_creation_start += table_row_start+cell_start+list[i]+cell_end+cell_start+list[i+1]+cell_end+table_row_end;
                        }
                        // alert(table_creation_start+table_body_end+table_end);
                        $(divID).append(table_creation_start+table_body_end+table_end);

                    });
                }
            
    </script>
    <header class="navbar-default" role="banner">
        <div class="container">
            <div class="page-header">
                <h1 class="text-center">Stock Sentiment Analysis</h1>
            </div>
        </div>
        <nav role="navigation">
            <div class="container-fluid">
                <!-- Brand and toggle get grouped for better mobile display -->
                <div class="navbar-header">
                    <button aria-expanded="false" class=
                    "navbar-toggle collapsed" data-target=
                    "#bs-example-navbar-collapse-1" data-toggle="collapse"
                    type="button"><span class="sr-only">Toggle
                    navigation</span> <span class="icon-bar"></span>
                    <span class="icon-bar"></span> <span class=
                    "icon-bar"></span></button>
                </div>
                <!-- Collect the nav links, forms, and other content for toggling -->
                <div class="collapse navbar-collapse" id=
                "bs-example-navbar-collapse-1">
                    <form class="navbar-form navbar-left" role="search">
                        <div class="form-group">
                            <input class="form-control" placeholder="Search"
                            type="text">
                        </div><button class="btn btn-default" type=
                        "submit">Submit</button>
                    </form>
                </div><!-- /.navbar-collapse -->
            </div><!-- /.container-fluid -->
        </nav>
    </header><br>
    <div class="container">
        <div class="row">
            <div class="col-sm-6">
                <div class="panel panel-success">
                    <div class="panel-heading">
                        <h3 class="panel-title">You want to buy these
                        :)</h3><span class="pull-right clickable"><i class=
                        "glyphicon glyphicon-chevron-up"></i></span>
                    </div>
                    <div class="panel-body">
                        <div id="table_positive"></div>
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="panel panel-danger">
                    <div class="panel-heading">
                        <h3 class="panel-title">You want to dump these
                        :(</h3><span class="pull-right clickable"><i class=
                        "glyphicon glyphicon-chevron-up"></i></span>
                    </div>
                    <div class="panel-body">
                        <div id="table_negative"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-6">
                <div id="container_line_chart" style=
                "width: 550px; height: 400px; margin: 0 auto"></div>
                <script src="line_chart.js" type="text/javascript">
                </script>
            </div>
            <div class="col-sm-offset-6">
                <div id="container_bar_chart" style=
                "width: 550px; height: 400px; margin: 0 auto"></div>
                <script src="bar_chart.js" type="text/javascript">
                </script>
            </div>
        </div>
    </div>
    <script type="text/javascript">
            $(document).on('click', '.panel-heading span.clickable', function(e){
                var $this = $(this);
                if(!$this.hasClass('panel-collapsed')) {
                    $this.parents('.panel').find('.specialCollapse').slideUp();
                    $this.addClass('panel-collapsed');
                    $this.find('i').removeClass('glyphicon-chevron-up').addClass('glyphicon-chevron-down');
                } else {
                    $this.parents('.panel').find('.specialCollapse').slideDown();
                    $this.removeClass('panel-collapsed');
                    $this.find('i').removeClass('glyphicon-chevron-down').addClass('glyphicon-chevron-up');
                }
            })
    </script>
</body>
</html>